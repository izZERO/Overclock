{% extends 'manage_base.html' %} {% block content %}
<div style="display: flex; justify-content: space-between">
  <h1>Products List</h1>
  <a
    href="{%url 'products_create' %}"
    class="btn btn-primary me-2 mt-2"
    role="button"
  >
    Add Product
  </a>
</div>

<div class="my-3">
  <form action="{% url 'products_index' %}" class="d-flex gap-2">
    <input
      type="text"
      name="search"
      class="form-control"
      placeholder="Search products by name, description, or category..."
      value="{{ request.GET.search }}"
      style="max-width: 500px"
    />
    <button type="submit" class="btn btn-primary">
      <i class="bi bi-search"></i> Search
    </button>
    {% if request.GET.search %}
    <a href="{% url 'products_index' %}" class="btn btn-secondary">
      <i class="bi bi-x-circle"></i> Clear
    </a>
    {% endif %}
  </form>
  {% if request.GET.search %}
  <p class="text-muted mt-2">
    Showing results for: <strong>"{{ request.GET.search }}"</strong>
    {% if product_list.count == 0 %}
    - No products found.
    {% else %}
    - Found {{ product_list.count }} products:
    {% endif %}
  </p>
  {% endif %}
</div>

<div class="container-fluid d-flex flex-wrap gap-2">
  {% for product in product_list %}

  <div class="card" style="width: 18rem; height: 30rem">
    {% load static %}

    <img
      src="{% static product.image|cut:'main/static/' %}"
      class="card-img-top img-thumbnail rounded-start"
      alt="..."
      style="height: 245px"
    />
    <div class="card-body">
      <a href="{%url 'products_detail' product.id %}">
        <h5 class="card-title">{{product.name}}</h5>
      </a>
      <span class="badge rounded-pill text-bg-primary"
        ><i class="bi bi-currency-dollar"></i> {{product.price}} BHD</span
      >

      <span class="badge rounded-pill text-bg-primary"
        ><i class="bi bi-calculator me-2"></i>{{product.stock}}</span
      >

      <a
        href="{%url 'products_update' product.id %}"
        class="btn btn-primary me-2"
        role="button"
      >
        Edit
      </a>
      <a
        href="{%url 'products_delete' product.id %}"
        class="btn btn-danger me-2"
        role="button"
      >
        Delete
      </a>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
