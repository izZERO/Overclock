{% extends "base.html" %} {% load static %} {% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="mb-1"><i class="bi bi-bag-check me-2"></i>My Orders</h1>
      <p class="text-muted">View and track all your orders</p>
    </div>
    <a href="{% url 'profile-view' %}" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-left me-1"></i>Back to Profile
    </a>
  </div>

  {% if orders %}

  <div class="alert alert-info mb-4">
    <i class="bi bi-info-circle me-2"></i>
    You have <strong>{{ orders.count }}</strong> order in total
  </div>

  <div class="row">
    {% for order in orders %}
    <div class="col-12 mb-4">
      <div class="card shadow-sm">
        <div class="card-header">
          <div class="row align-items-center">
            <div class="col-md-3">
              <small class="text-muted">Order ID</small>
              <h6 class="mb-0">#{{ order.id }}</h6>
            </div>
            <div class="col-md-3">
              <small class="text-muted">Date Placed</small>
              <h6 class="mb-0">{{ order.date_placed|date:"M d, Y" }}</h6>
              <small class="text-muted"
                >{{ order.date_placed|date:"h:i A" }}</small
              >
            </div>
            <div class="col-md-3">
              <small class="text-muted">Total Amount</small>
              <h6 class="mb-0 text-primary">{{ order.total_cost }} BHD</h6>
            </div>
            <div class="col-md-3">
              <small class="text-muted">Status</small>
              <div class="mt-1">
                {% if order.status == 'c' %}
                <span class="badge bg-secondary">
                  <i class="bi bi-cart me-1"></i>Cart
                </span>
                {% elif order.status == 'p' %}
                <span class="badge bg-info">
                  <i class="bi bi-check-circle me-1"></i>Placed
                </span>
                {% elif order.status == 't' %}
                <span class="badge bg-warning text-dark">
                  <i class="bi bi-truck me-1"></i>In Transit
                </span>
                {% elif order.status == 'd' %}
                <span class="badge bg-success">
                  <i class="bi bi-box-seam me-1"></i>Delivered
                </span>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-8">
              <h6 class="mb-3">
                <i class="bi bi-geo-alt me-2"></i>Shipping Details
              </h6>
              <p class="mb-1">Address: {{ order.shipping_address }}</p>
              <p class="mb-0">
                <i class="bi bi-telephone me-2"></i>Phone Number: {{
                user.profile.phone }}
              </p>
            </div>
            <div class="col-md-4 text-end">
              <a
                href="{% url 'customer_order_detail' order.id %}"
                class="btn btn-outline-secondary btn-sm"
              >
                <i class="bi bi-eye me-1"></i>View Details
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  {% else %}

  <div class="card shadow-sm">
    <div class="card-body text-center py-5">
      <i class="bi bi-cart-x text-muted" style="font-size: 5rem"></i>
      <h3 class="mt-4 mb-3">No Orders Yet</h3>
      <p class="text-muted mb-4">
        You haven't placed any orders yet. Start shopping to see your orders
        here!
      </p>
      <a href="{% url 'browse' %}" class="btn btn-primary btn-lg">
        <i class="bi bi-shop me-2"></i>Start Shopping
      </a>
    </div>
  </div>
  {% endif %}
</div>
{% endblock content %}
